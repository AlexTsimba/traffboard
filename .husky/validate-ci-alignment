#!/bin/sh

# Validate local setup matches CI/CD expectations
# This ensures no surprises when code reaches production

echo "ğŸ” Validating CI/CD alignment..."

# Check TypeScript compilation (same as CI)
echo "ğŸ“ TypeScript check..."
if ! npx tsc --noEmit --pretty; then
  echo "âŒ TypeScript errors found - CI will fail"
  exit 1
fi

# Check linting (same as CI)
echo "ğŸ”§ ESLint check..."
if ! npm run lint; then
  echo "âŒ Linting errors found - CI will fail"  
  exit 1
fi

# Check if tests would pass (optional but recommended)
if [ -f "playwright.config.ts" ]; then
  echo "ğŸ§ª Quick test validation..."
  # Don't run full tests, just validate they can start
  if ! npx playwright install-deps --dry-run >/dev/null 2>&1; then
    echo "âš ï¸  Test dependencies may be missing"
  fi
fi

echo "âœ… Local setup aligned with CI/CD requirements"